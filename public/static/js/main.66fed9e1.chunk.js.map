{"version":3,"sources":["api/smartspace.js","api/socket.js","components/Spinner.js","components/NavBar.js","components/shoppingListsNav/ShoppingListsNav.js","components/shoppingListDisplay/MemberDisplay.js","components/shoppingItems/ShoppingItems.js","components/shoppingListDisplay/ShoppingListDisplay.js","components/mainPage/MainPage.js","components/login/Login.js","components/register/Register.js","components/UserDetails.js","components/ManageProfile.js","components/settings/Settings.js","index.js"],"names":["http","localStorage","getItem","setItem","updateServerDetails","serverIp","serverPort","axios","create","baseURL","concat","getUserByKey","smartspace","email","get","invokeAction","actionType","elementSmartspace","elementId","playerSmartspace","playerEmail","body","type","element","id","player","properties","arguments","length","undefined","post","createNewElement","managerSmartspace","managerEmail","elementType","name","lat","lng","latlng","elementProperties","errorHandler","err","response","toast","error","data","message","toString","getSocketClient","shouldRetry","socketIp","socketPort","socketClient","socketIOClient","reconnection","on","msg","info","Spinner","props","react_default","a","createElement","className","role","defaultProps","ProfileDropdown","user","data-toggle","src","avatar","alt","width","height","aria-labelledby","CreateRow","title","link","icon","style","components_Spinner","SmartspaceLink","react_router_dom","to","key","href","NavBar","ShoppingListsNav","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","newListName","newListDesc","timer","currentList","handleNewListNameChange","bind","handleNewListDescChange","handleCreateList","handleSelectShoppingList","prevProps","updateShoppingLists","event","setState","target","value","listData","_this2","shoppingListData","clearTimeout","selectShoppingList","setTimeout","_this3","listName","listDesc","onlineMembers","api","then","onlineIndicator","description","members","res","success","catch","_this4","shoppingListElements","shoppingListsData","map","shoppingList","active","onClick","Fragment","data-target","cursor","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","x1","y1","x2","y2","tabIndex","data-dismiss","htmlFor","onChange","required","React","Component","MemberDisplay","userData","online","updateUserData","assertThisInitialized","onlineUsers","userSmartspace","userEmail","isOnline","indexOf","marker","username","Item","isMarked","textMarked","marked","itemName","toggleItemMarking","ShoppingItems","addItemName","itemsData","handleAddItemNameChange","handleSubmitNewItem","updateItems","off","e","listSmartspace","listId","listKey","emit","page","size","params","itemData","markValue","markStatus","_this5","items","item","ShoppingItems_Item","placeholder","onKeyDown","ShoppingListDisplay","newMemberEmail","newMemberSmartspace","handleNewMemberEmailChange","handleAddNewMember","toLowerCase","memberToCheck","JSON","parse","stringify","userToString","userKey","member","newElementProperties","newUserKey","push","membersAlreadyContains","addMember","_ref2","elementName","put","newUser","inviter","changingList","membersDisplay","shoppingListDisplay_MemberDisplay","backgroundColor","creator","components_shoppingItems_ShoppingItems","handlenewMemberSmartspaceChange","MainPage","selectedShoppingList","updateOnlineMembers","onlineUsersChanged","match","window","addEventListener","ev","preventDefault","checkOutThenCheckIn","newListData","checkIn","oldListData","_this6","components_NavBar","components_shoppingListsNav_ShoppingListsNav","components_shoppingListDisplay_ShoppingListDisplay","Login","isUserLoggedIn","handleEmailChange","handleSmartspaceChange","handleServerIpChange","handleServerPortChange","handleSubmit","react_router","onSubmit","registerSuccess","handleUsernameChange","handleAvatarChange","handleRoleChange","defaultValue","UserCard","children","TextField","label","disabled","UserDetails","points","handleProfileUpdate","ManageProfile","newUsername","newAvatar","_ref","components_UserDetails","Settings","saved","connectionSuccess","socketTest","disconnect","configure","App","path","exact","component","Register","ReactDOM","render","src_App","document","querySelector"],"mappings":"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","file":"static/js/main.66fed9e1.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nvar http = null;\r\n\r\nif (!localStorage.getItem(\"server_ip\")) {\r\n    localStorage.setItem(\"server_ip\", \"localhost\");\r\n}\r\nif (!localStorage.getItem(\"server_port\")) {\r\n    localStorage.setItem(\"server_port\", \"8080\");\r\n}\r\n\r\nexport const updateServerDetails = () => {\r\n    const serverIp = localStorage.getItem(\"server_ip\");\r\n    const serverPort = localStorage.getItem(\"server_port\");\r\n\r\n    http = axios.create({\r\n        baseURL: `http://${serverIp}:${serverPort}/smartspace/`,\r\n        //headers: {\r\n        //   dont remove this might use later\r\n        //}\r\n    });\r\n}\r\n\r\nupdateServerDetails();\r\n\r\n// user login\r\nexport const getUserByKey = (smartspace, email) => {\r\n    return http.get(`users/login/${smartspace}/${email}`);\r\n}\r\n\r\n// register user\r\nexport const registerAccount = (email, role, username, avatar) => {\r\n    const body = {\r\n        \"email\": email,\r\n        \"role\": role,\r\n        \"username\": username,\r\n        \"avatar\": avatar\r\n    }\r\n\r\n    return http.post('users', body);\r\n}\r\n\r\n// Update user \r\n// example usage: api.updateUser(\"2019B.nadav.peleg\", \"player@gmail.com\", {avatar: \"image.png\"});\r\n// example usage: api.updateUser(\"2019B.nadav.peleg\", \"player@gmail.com\", {role: \"MANAGER\", avatar: \"image.png\"});\r\nexport const updateUser = (smartspace, email, { role, username, avatar }) => {\r\n    let body = {}\r\n\r\n    if (role != null) {\r\n        body[\"role\"] = role;\r\n    }\r\n    if (username != null) {\r\n        body[\"username\"] = username;\r\n    }\r\n    if (avatar != null) {\r\n        body[\"avatar\"] = avatar;\r\n    }\r\n\r\n    return http.put(`users/login/${smartspace}/${email}`, body);\r\n}\r\n\r\n// Update element \r\nexport const updateElement = (managerSmartspace, managerEmail, elementSmartspace, elementId, { elementName, elementType, elementProperties }) => {\r\n    let body = {}\r\n\r\n    if (elementName != null) {\r\n        body[\"name\"] = elementName;\r\n    }\r\n    if (elementType != null) {\r\n        body[\"elementType\"] = elementType;\r\n    }\r\n    if (elementProperties != null) {\r\n        body[\"elementProperties\"] = elementProperties;\r\n    }\r\n\r\n    return http.put(`elements/${managerSmartspace}/${managerEmail}/${elementSmartspace}/${elementId}`, body);\r\n}\r\n\r\n// get element\r\nexport const getElementByKey = (smartspace, email, elementSmartspace, elementId) => {\r\n    return http.get(`elements/${smartspace}/${email}/${elementSmartspace}/${elementId}`);\r\n}\r\n\r\n// get All elements using pagination\r\nexport const getAllElementsUsingPagination = (smartspace, email, page = 0, size = 10) => {\r\n    return http.get(`elements/${smartspace}/${email}`, {\r\n        params: { page: page, size: size }\r\n    });\r\n}\r\n\r\n// search elements by type\r\nexport const getElementsByType = (smartspace, email, typeSearchStr, page = 0, size = 10) => {\r\n    return http.get(`elements/${smartspace}/${email}`, {\r\n        params: {\r\n            search: 'type',\r\n            value: typeSearchStr,\r\n            page: page,\r\n            size: size\r\n        }\r\n    });\r\n}\r\n\r\n// search elements by name\r\nexport const getElementsByName = (smartspace, email, nameSearchStr, page = 0, size = 10) => {\r\n    return http.get(`elements/${smartspace}/${email}`, {\r\n        params: {\r\n            search: 'name',\r\n            value: nameSearchStr,\r\n            page: page,\r\n            size: size\r\n        }\r\n    });\r\n}\r\n\r\n//get all elements by location\r\nexport const getAllElementsByLocatoin = (smartspace, email, x = 0, y = 0, distance = 10, page = 0, size = 10) => {\r\n    return http.get(`elements/${smartspace}/${email}`, {\r\n        params: {\r\n            search: 'location',\r\n            x: x,\r\n            y: y,\r\n            distance: distance,\r\n            page: page,\r\n            size: size\r\n        }\r\n    });\r\n}\r\n\r\n// invoke actions\r\nexport const invokeAction = (actionType, elementSmartspace, elementId, playerSmartspace, playerEmail, properties = {}) => {\r\n    const body = {\r\n        \"type\": actionType,\r\n        \"element\": { \"smartspace\": elementSmartspace, \"id\": elementId },\r\n        \"player\": { \"smartspace\": playerSmartspace, \"email\": playerEmail },\r\n        \"properties\": properties\r\n    }\r\n\r\n    return http.post('actions', body);\r\n}\r\n\r\n// create new element\r\nexport const createNewElement = (managerSmartspace, managerEmail, elementType, name, lat, lng, properties = {}) => {\r\n    const body = {\r\n        \"elementType\": elementType,\r\n        \"name\": name,\r\n        \"latlng\": { \"lat\": lat, \"lng\": lng },\r\n        \"elementProperties\": properties\r\n    }\r\n\r\n    return http.post(`elements/${managerSmartspace}/${managerEmail}`, body);\r\n}\r\n\r\n// # -------------------------- Bussiness Logic -------------------------- #\r\n\r\n// create a new shopping list, will only work as manager.\r\nexport const createNewShoppingList = (smartspace, email, listName, listDesc, onlineIndicator) => {\r\n    return createNewElement(smartspace, email, \"ShoppingList\", listName, 0, 0, {\r\n        description: listDesc,\r\n        onlineIndicator: onlineIndicator.key,\r\n        members: []\r\n    });\r\n}\r\n\r\n// create online indicator\r\nexport const createOnlineIndicator = (smartspace, email, listName) => {\r\n    return createNewElement(smartspace, email, \"OnlineIndicator\", listName + \"indicator\", 0, 0, {\r\n        onlineMembers: []\r\n    });\r\n}\r\n\r\n// get all shopping lists for a user\r\nexport const getAllShoppingLists = (smartspace, email, page=0, size=100) => {\r\n    return http.get(`shoppingLists/${smartspace}/${email}`, {\r\n        params: {\r\n            page: page,\r\n            size: size\r\n        }\r\n    });\r\n}\r\n\r\n// get all shopping items for a list\r\nexport const getAllItemsByShoppingList = (userSmartspace, userEmail, listSmartspace, listId, page=0, size=100) => {\r\n    return http.get(`shoppingLists/${userSmartspace}/${userEmail}/${listSmartspace}/${listId}`, {\r\n        params: {\r\n            page: page,\r\n            size: size\r\n        }\r\n    });\r\n}\r\n\r\n// create a new shopping list, will only work as manager.\r\nexport const createNewShoppingItem = (userSmartspace, userEmail, listSmartspace, listId, itemName) => {\r\n    return createNewElement(userSmartspace, userEmail, \"ShoppingItem\", itemName, 0, 0, {\r\n        listKey: {smartspace: listSmartspace, id: listId},\r\n        marked: false\r\n    });\r\n}\r\n\r\n// invoke mark item action\r\nexport const invokeMarkItem = (elementSmartspace, elementId, playerSmartspace, playerEmail, markValue) => {\r\n    return invokeAction(\"MarkItem\", elementSmartspace, elementId, playerSmartspace, playerEmail, {\r\n        markStatus: markValue\r\n    });\r\n}\r\n\r\n// check in\r\nexport const invokeCheckIn = (elementSmartspace, elementId, playerSmartspace, playerEmail) => {\r\n    return invokeAction(\"CheckIn\", elementSmartspace, elementId, playerSmartspace, playerEmail);\r\n}\r\n\r\n// check out\r\nexport const invokeCheckOut = (elementSmartspace, elementId, playerSmartspace, playerEmail) => {\r\n    return invokeAction(\"CheckOut\", elementSmartspace, elementId, playerSmartspace, playerEmail);\r\n}\r\n\r\n// error handler for http requests\r\nexport const errorHandler = (err) => {\r\n    if (err.response) {\r\n        toast.error(err.response.data.message);\r\n    }\r\n    else {\r\n        toast.error(err.toString());\r\n    }\r\n}","import socketIOClient from \"socket.io-client\";\r\nimport { toast } from 'react-toastify';\r\n\r\nexport const getSocketClient = (shouldRetry) => {\r\n    if (!localStorage.getItem(\"socket_ip\")) {\r\n        localStorage.setItem(\"socket_ip\", \"localhost\");\r\n    }\r\n    if (!localStorage.getItem(\"socket_port\")) {\r\n        localStorage.setItem(\"socket_port\", \"8000\");\r\n    }\r\n\r\n    const socketIp = localStorage.getItem(\"socket_ip\");\r\n    const socketPort = localStorage.getItem(\"socket_port\");\r\n\r\n    let socketClient = socketIOClient(`http://${socketIp}:${socketPort}`, {\r\n        reconnection: shouldRetry\r\n    });\r\n\r\n    // add toast event handler here\r\n    socketClient.on(\"toast_info\", msg => {\r\n        toast.info(msg);\r\n    });\r\n\r\n    return socketClient;\r\n}\r\n\r\nexport const updateSocketSettings = () => {\r\n    if (socketClient) {\r\n        socketClient.disconnect();\r\n        socketClient = getSocketClient(true);\r\n    }\r\n}\r\n\r\nexport let socketClient = getSocketClient(true);\r\n","import React from 'react'\n\nconst Spinner = (props) => {\n    return (\n        <div className=\"d-flex justify-content-center\">\n            <div className=\"spinner-border text-primary\" role=\"status\">\n                <span className=\"sr-only\">Loading...</span>\n            </div>\n        </div>\n    );\n};\nSpinner.defaultProps = {\n    message: 'Loading...'\n};\nexport default Spinner","import React from \"react\";\r\nimport Spinner from \"./Spinner\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction ProfileDropdown(props) {\r\n    let user = props.user;\r\n    if (user != null) {\r\n        return (\r\n            <div>\r\n                <div className=\"\" data-toggle=\"dropdown\">\r\n                    <img className=\"rounded-circle p-3\" src={user.avatar} alt={user.avatar} width=\"64px\" height=\"64px\" />\r\n                    <small className=\"dropdown-toggle\"></small>\r\n                </div>\r\n                <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\r\n                    <CreateRow title=\"View Profile\" link=\"./profile\" icon=\"far fa-address-card\" />\r\n                    <CreateRow title=\"Sockets\" link=\"./settings\" icon=\"fas fa-cog\" />\r\n                    <CreateRow title=\"Log Out\" link=\"/\" icon=\"fas fa-sign-out-alt\" />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return <div className=\"p-3\" style={{height: \"64px\"}}><Spinner /></div>\r\n}\r\n\r\nfunction SmartspaceLink(props) {\r\n    let user = props.user;\r\n    if (user != null) {\r\n        return <Link className=\"navbar-brand mt-2 \" to={`/dashboard/${user.key.smartspace}/${user.key.email}/`}>Smartspace</Link>\r\n    }\r\n\r\n    // don't use <Link> here because Router might not be mounted yet\r\n    return <a className=\"navbar-brand mt-2 \" href=\"/\">Smartspace</a>\r\n}\r\n\r\nexport function NavBar(props) {\r\n    let user = props.user;\r\n    return (\r\n        <nav className=\"navbar navbar-light bg-light\">\r\n            <div className=\"w-100\">\r\n                <div className=\"float-left\">\r\n                    <div className=\"dropdown ml-2\">\r\n                        <ProfileDropdown user={user} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"float-right\">\r\n                    <SmartspaceLink user={user}/>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nfunction CreateRow(props) {\r\n    return (\r\n        <Link className=\"dropdown-item\" to={props.link}>\r\n            <div className=\"row\">\r\n                <div className=\"col-9\">{props.title}</div>\r\n                <div className=\"col-2 text-center\"><i className={props.icon}></i></div>\r\n            </div>\r\n        </Link>\r\n    );\r\n}\r\n\r\nexport default NavBar;\r\n","import React from \"react\";\r\nimport { toast } from 'react-toastify';\r\n\r\nimport * as api from '../../api/smartspace';\r\nimport \"./ShoppingListsNav.css\";\r\n\r\nclass ShoppingListsNav extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { newListName: \"\", newListDesc: \"\" };\r\n\t\tthis.timer = null;\r\n\t\tthis.currentList = null;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.handleNewListNameChange = this.handleNewListNameChange.bind(this);\r\n\t\tthis.handleNewListDescChange = this.handleNewListDescChange.bind(this);\r\n\t\tthis.handleCreateList = this.handleCreateList.bind(this);\r\n\t\tthis.handleSelectShoppingList = this.handleSelectShoppingList.bind(this);\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.user && (this.props.user !== prevProps.user)) {\r\n\t\t\tthis.props.updateShoppingLists();\r\n\t\t}\r\n\t}\r\n\r\n\thandleNewListNameChange(event) {\r\n\t\tthis.setState({ newListName: event.target.value });\r\n\t}\r\n\r\n\thandleNewListDescChange(event) {\r\n\t\tthis.setState({ newListDesc: event.target.value });\r\n\t}\r\n\r\n\thandleSelectShoppingList(listData) {\r\n\t\tif (listData && this.props.shoppingListData && listData.key.smartspace === this.props.shoppingListData.key.smartspace && listData.key.id === this.props.shoppingListData.key.id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.timer) {\r\n\t\t\tclearTimeout(this.timer);\r\n\t\t\tthis.timer = null;\r\n\t\t}\r\n\r\n\t\tthis.props.selectShoppingList(null);\r\n\t\tthis.timer = setTimeout(() => {this.props.selectShoppingList(listData)}, 1100);\r\n\t}\r\n\r\n\thandleCreateList() {\r\n\t\tif (this.props.user) {\r\n\t\t\tlet smartspace = this.props.user.key.smartspace;\r\n\t\t\tlet email = this.props.user.key.email;\r\n\t\t\tlet listName = this.state.newListName;\r\n\t\t\tlet listDesc = this.state.newListDesc;\r\n\r\n\t\t\tapi.createOnlineIndicator(smartspace, email, listName).then(onlineIndicator => {\r\n\t\t\t\tapi.createNewShoppingList(smartspace, email, listName, listDesc, onlineIndicator.data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\ttoast.success(\"Created list \" + listName);\r\n\t\t\t\t\t\tthis.props.updateShoppingLists();\r\n\t\t\t\t\t\tthis.setState({ newListName: \"\", newListDesc: \"\" });\r\n\t\t\t\t\t\tthis.handleSelectShoppingList(res.data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(api.errorHandler);\r\n\t\t\t})\r\n\t\t\t\t.catch(api.errorHandler);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst shoppingListElements = this.props.shoppingListsData.map((shoppingList) => {\r\n\t\t\tlet active = \"\";\r\n\t\t\tif (this.props.shoppingListData && this.props.shoppingListData.key.smartspace === shoppingList.key.smartspace && this.props.shoppingListData.key.id === shoppingList.key.id) {\r\n\t\t\t\tactive = \" active\";\r\n\t\t\t}\r\n\r\n\t\t\treturn <a className={\"list-group-item list-group-item-action\" + active} id={`list-${shoppingList.key.id}`} data-toggle=\"list\" href={`#${shoppingList.key.id}`} key={shoppingList.key.id} role=\"tab\" smartspace={shoppingList.key.id} onClick={this.handleSelectShoppingList.bind(null, shoppingList)} >{shoppingList.name}</a>\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<h6 className=\"d-flex justify-content-between align-items-center px-3 mt-3 mb-3 text-muted\">\r\n\t\t\t\t\t<span className=\"pl-2\">My Lists</span>\r\n\t\t\t\t\t<span className=\"d-flex align-items-center text-muted\" data-toggle=\"modal\" data-target=\"#newList\" style={{ cursor: 'pointer' }}>\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"feather feather-plus-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</h6>\r\n\r\n\t\t\t\t<div className=\"list-group text-center mt-0 \" id=\"list-tab\" role=\"tablist\">\r\n\t\t\t\t\t{shoppingListElements}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"modal fade\" id=\"newList\" tabIndex=\"-1\" role=\"dialog\">\r\n\t\t\t\t\t<div className=\"modal-dialog\" role=\"document\">\r\n\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"createNewListLabel\">Create A New List</h5>\r\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\"></button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"list-name\" className=\"col-form-label\">List Name:</label>\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"form-control\" id=\"list-name\" value={this.state.newListName} onChange={this.handleNewListNameChange} required />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"list-text\" className=\"col-form-label\">Description:</label>\r\n\t\t\t\t\t\t\t\t\t\t<textarea className=\"form-control\" id=\"list-text\" value={this.state.newListDesc} onChange={this.handleNewListDescChange}></textarea>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\r\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={this.handleCreateList}>Create</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ShoppingListsNav;\r\n","import React from \"react\";\r\n\r\nimport * as api from '../../api/smartspace';\r\nimport \"./ShoppingListDisplay.css\";\r\n\r\nclass MemberDisplay extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { userData: null, online: false };\r\n\r\n\t\tthis.updateUserData = this.updateUserData.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.updateUserData();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.user && ((this.props.user !== prevProps.user) || (this.props.onlineUsers !== prevProps.onlineUsers))) {\r\n\t\t\tthis.updateUserData();\r\n\t\t}\r\n\t}\r\n\r\n\tupdateUserData() {\r\n\t\tlet user = this.props.user;\r\n\t\tlet onlineUsers = this.props.onlineUsers;\r\n\r\n\t\tif (user) {\r\n\t\t\tapi.getUserByKey(user.userSmartspace, user.userEmail)\r\n\t\t\t\t.then(res => this.setState({ userData: res.data }))\r\n\t\t\t\t.catch(api.errorHandler);\r\n\r\n\t\t\t// add green dot if online\r\n\t\t\tif (onlineUsers) {\r\n\t\t\t\tlet isOnline = (onlineUsers.indexOf(`${user.userSmartspace}#${user.userEmail}`) >= 0);\r\n\t\t\t\tthis.setState({ online: isOnline });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.userData) {\r\n\t\t\tlet userData = this.state.userData;\r\n\t\t\tlet marker = \"\";\r\n\r\n\t\t\tif (this.state.online) {\r\n\t\t\t\tmarker = \"online\"\r\n\t\t\t}\r\n\r\n\t\t\tif (userData && userData.role === \"MANAGER\") {\r\n\t\t\t\tmarker = \"manager\"\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<span className={marker}></span>\r\n\t\t\t\t\t<img className=\"rounded-circle border mx-1\" src={userData.avatar} title={userData.username} alt={userData.username} width=\"48px\" height=\"48px\" />\r\n\t\t\t\t</span>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<span></span>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MemberDisplay;\r\n","import React from \"react\";\r\nimport { toast } from 'react-toastify';\r\n\r\nimport * as api from '../../api/smartspace';\r\nimport {socketClient} from '../../api/socket';\r\n\r\nimport \"./ShoppingItems.css\";\r\n\r\n// TODO: change to functinal componenet\r\nclass Item extends React.Component {\r\n\r\n\trender() {\r\n\t\tlet isMarked = \"\";\r\n\t\tlet textMarked = \"\";\r\n\r\n\t\tif (this.props.marked) {\r\n\t\t\tisMarked = \" checked\"\r\n\t\t\ttextMarked = \" textChecked\"\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"col-12 col-md-4 col-lg-3 mb-3\">\r\n\t\t\t\t<div className=\"mx-1 bg-light rounded border p-2 row itemBox\">\r\n\t\t\t\t\t<div className=\"col overflow-hidden\">\r\n\t\t\t\t\t\t<span className={\"lead itemText text-center\" + textMarked}>{this.props.itemName}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={\"col-2 myCheckbox\" + isMarked} onClick={this.props.toggleItemMarking}></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass ShoppingItems extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { addItemName: \"\", itemsData: [] };\r\n\r\n\t\tthis.handleAddItemNameChange = this.handleAddItemNameChange.bind(this);\r\n\t\tthis.handleSubmitNewItem = this.handleSubmitNewItem.bind(this);\r\n\t\tthis.toggleItemMarking = this.toggleItemMarking.bind(this);\r\n\t\tthis.updateItems = this.updateItems.bind(this);\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.shoppingListData && (this.props.shoppingListData !== prevProps.shoppingListData)) {\r\n\t\t\tthis.updateItems();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.updateItems();\r\n\r\n\t\tsocketClient.on(\"list_items_changed\", this.updateItems);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tsocketClient.off(\"list_items_changed\", this.updateItems);\r\n\t}\r\n\r\n\thandleAddItemNameChange(event) {\r\n\t\tthis.setState({ addItemName: event.target.value });\r\n\t}\r\n\r\n\thandleSubmitNewItem(e) {\r\n\t\t// submit when pressing enter\r\n\t\tif (e.key && e.key !== 'Enter') {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet user = this.props.user;\r\n\t\tlet listData = this.props.shoppingListData;\r\n\r\n\t\tapi.createNewShoppingItem(user.key.smartspace, user.key.email, listData.key.smartspace, listData.key.id, this.state.addItemName)\r\n\t\t\t.then(res => {\r\n\t\t\t\ttoast.success(\"Created item \" + this.state.addItemName);\r\n\r\n\t\t\t\tthis.updateItems();\r\n\t\t\t\tsocketClient.emit(\"changed_item\", listData.key);\r\n\t\t\t\tthis.setState({ addItemName: \"\" });\r\n\t\t\t})\r\n\t\t\t.catch(api.errorHandler);\r\n\t}\r\n\r\n\tupdateItems() {\r\n\t\tlet user = this.props.user;\r\n\t\tlet listData = this.props.shoppingListData;\r\n\r\n\t\tapi.getAllItemsByShoppingList(user.key.smartspace, user.key.email, listData.key.smartspace, listData.key.id)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.setState({ addItemName: \"\", itemsData: res.data });\r\n\t\t\t})\r\n\t\t\t.catch(api.errorHandler);\r\n\t}\r\n\r\n\ttoggleItemMarking(itemData) {\r\n\t\tlet user = this.props.user;\r\n\r\n\t\tapi.invokeMarkItem(itemData.key.smartspace, itemData.key.id, user.key.smartspace, user.key.email, !itemData.elementProperties.marked)\r\n\t\t\t.then(res => {\r\n\t\t\t\tthis.updateItems();\r\n\t\t\t\tsocketClient.emit(\"changed_item\", this.props.shoppingListData.key);\r\n\t\t\t})\r\n\t\t\t.catch(api.errorHandler);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet items = this.state.itemsData.map(item => <Item itemName={item.name} marked={item.elementProperties.marked} toggleItemMarking={this.toggleItemMarking.bind(null, item)} key={item.key.id} />)\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t{items}\r\n\r\n\t\t\t\t<div className=\"col-12 col-md-4 col-lg-3 mb-3\">\r\n\t\t\t\t\t<div className=\"mx-1 bg-light rounded border p-2 row itemBox\">\r\n\t\t\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"form-control addItemField text-center\" placeholder=\"Add Item\" value={this.state.addItemName} onChange={this.handleAddItemNameChange} onKeyDown={this.handleSubmitNewItem} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-2 myCheckbox addIcon\" onClick={this.handleSubmitNewItem}></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ShoppingItems;\r\n","import React from \"react\";\r\nimport { toast } from 'react-toastify';\r\n\r\nimport * as api from '../../api/smartspace';\r\nimport { socketClient } from '../../api/socket';\r\n\r\nimport \"./ShoppingListDisplay.css\";\r\nimport MemberDisplay from './MemberDisplay';\r\nimport ShoppingItems from '../shoppingItems/ShoppingItems'\r\nimport Spinner from '../Spinner';\r\n\r\nclass ShoppingListDisplay extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { newMemberEmail: \"\", newMemberSmartspace: \"\" };\r\n\r\n\t\tthis.handleNewMemberEmailChange = this.handleNewMemberEmailChange.bind(this);\r\n\t\tthis.handleAddNewMember = this.handleAddNewMember.bind(this);\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.user && (this.props.user !== prevProps.user)) {\r\n\t\t\tthis.setState({ newMemberSmartspace: this.props.user.key.smartspace });\r\n\t\t\tsocketClient.emit(\"joinUserRoom\", this.props.user.key);\r\n\t\t}\r\n\t}\r\n\r\n\thandlenewMemberSmartspaceChange(event) {\r\n\t\tthis.setState({ newMemberSmartspace: event.target.value });\r\n\t}\r\n\r\n\r\n\thandleNewMemberEmailChange(event) {\r\n\t\tthis.setState({ newMemberEmail: event.target.value.toLowerCase() });\r\n\t}\r\n\r\n\tmembersAlreadyContains(members, memberToCheck) {\r\n\t\tmembers = JSON.parse(JSON.stringify(members)); // clone\r\n\r\n\t\tconst userToString = (userKey) => {\r\n\t\t\treturn `user_${userKey.userSmartspace}_${userKey.userEmail}`;\r\n\t\t}\r\n\r\n\t\treturn (members.map(member => userToString(member)).indexOf(userToString(memberToCheck)) >= 0);\r\n\t}\r\n\r\n\thandleAddNewMember() {\r\n\t\tlet userData = this.props.user;\r\n\t\tlet listData = this.props.shoppingListData;\r\n\r\n\t\tif (userData && userData.role && listData) {\r\n\t\t\tlet newElementProperties = listData.elementProperties;\r\n\t\t\tnewElementProperties = JSON.parse(JSON.stringify(newElementProperties)); // clone\r\n\r\n\t\t\t// add member to array\r\n\t\t\tlet newUserKey = { \"userSmartspace\": this.state.newMemberSmartspace, \"userEmail\": this.state.newMemberEmail }\r\n\t\t\tnewElementProperties.members.push(newUserKey);\r\n\r\n\t\t\tif (this.membersAlreadyContains(listData.elementProperties.members, newUserKey)) {\r\n\t\t\t\ttoast.error(\"This user is already a member in this shopping list.\");\r\n\t\t\t\tthis.setState({ newMemberEmail: \"\" });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst addMember = () => {\r\n\t\t\t\tapi.updateElement(userData.key.smartspace, userData.key.email, listData.key.smartspace, listData.key.id, { elementProperties: newElementProperties })\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\ttoast.success(\"Added user \" + this.state.newMemberEmail)\r\n\t\t\t\t\t\tlistData.elementProperties.members.push({ \"userSmartspace\": this.state.newMemberSmartspace, \"userEmail\": this.state.newMemberEmail });\r\n\r\n\t\t\t\t\t\tthis.props.updateShoppingLists();\r\n\t\t\t\t\t\tthis.setState({ newMemberEmail: \"\" });\r\n\t\t\t\t\t\tsocketClient.emit(\"added_new_member\", {newUser: newUserKey, listName: listData.name, inviter: userData.username});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(api.errorHandler);\r\n\t\t\t}\r\n\r\n\t\t\tapi.getUserByKey(this.state.newMemberSmartspace, this.state.newMemberEmail)\r\n\t\t\t\t.then(res => addMember())\r\n\t\t\t\t.catch(api.errorHandler);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.shoppingListData && !this.props.changingList) {\r\n\t\t\tlet listData = this.props.shoppingListData;\r\n\t\t\tlet membersDisplay = listData.elementProperties.members.map(user => {\r\n\t\t\t\treturn <MemberDisplay user={user} key={user.userEmail} onlineUsers={this.props.onlineUsers} />\r\n\t\t\t})\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"jumbotron jumbotron-fluid py-2\" style={{ backgroundColor: \"rgb(220, 170, 120)\" }}>\r\n\t\t\t\t\t\t<div className=\"container text-center mx-auto\">\r\n\t\t\t\t\t\t\t<h1 className=\"display-4\">{listData.name}</h1>\r\n\t\t\t\t\t\t\t<p className=\"lead\">{listData.elementProperties.description}</p>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<span className=\"membersBox\">\r\n\t\t\t\t\t\t\t\t\t{membersDisplay}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className=\"membersBox\">\r\n\t\t\t\t\t\t\t\t\t<MemberDisplay user={{ userSmartspace: listData.creator.smartspace, userEmail: listData.creator.email }} onlineUsers={this.props.onlineUsers} />\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-muted mx-1\" data-toggle=\"modal\" data-target=\"#newMember\" style={{ cursor: 'pointer' }}>\r\n\t\t\t\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"feather feather-plus-circle\"><title id=\"title\">Add Users</title><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<ShoppingItems user={this.props.user} shoppingListData={this.props.shoppingListData} />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"modal fade\" id=\"newMember\" tabIndex=\"-1\" role=\"dialog\">\r\n\t\t\t\t\t\t<div className=\"modal-dialog\" role=\"document\">\r\n\t\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"addMemberLabel\">Add New Player</h5>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"modal\"></button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"list-namel\" className=\"col-form-label\">Player Smartspace:</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"email\" className=\"form-control\" id=\"list-namel\" value={this.state.newMemberSmartspace} onChange={this.handlenewMemberSmartspaceChange} required />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"list-namel\" className=\"col-form-label\">Player Email:</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"email\" className=\"form-control\" id=\"list-addEmail\" value={this.state.newMemberEmail} onChange={this.handleNewMemberEmailChange} required />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary\" data-dismiss=\"modal\" onClick={this.handleAddNewMember}>Add</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn <div className=\"text-center mt-4\"><h1 className=\"display-2 mb-4\">Loading...</h1><Spinner /></div>\r\n\t}\r\n}\r\n\r\nexport default ShoppingListDisplay;","import React from \"react\";\r\n\r\nimport * as api from '../../api/smartspace';\r\nimport {socketClient} from '../../api/socket';\r\n\r\nimport NavBar from \"../NavBar\";\r\nimport ShoppingListsNav from \"../shoppingListsNav/ShoppingListsNav\";\r\nimport ShoppingListDisplay from \"../shoppingListDisplay/ShoppingListDisplay\";\r\n\r\nimport \"./MainPage.css\";\r\n\r\nclass MainPage extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { smartspace: \"\", email: \"\", selectedShoppingList: null, changingList: false, user: null, onlineUsers: [], shoppingListsData: [] };\r\n\r\n\t\tthis.selectShoppingList = this.selectShoppingList.bind(this);\r\n\t\tthis.updateOnlineMembers = this.updateOnlineMembers.bind(this);\r\n\t\tthis.updateShoppingLists = this.updateShoppingLists.bind(this);\r\n\t\tthis.onlineUsersChanged = this.onlineUsersChanged.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.match && this.props.match.params) {\r\n\t\t\tlet params = this.props.match.params;\r\n\t\t\tthis.setState({ smartspace: params.smartspace, email: params.email });\r\n\t\t\tapi.getUserByKey(params.smartspace, params.email)\r\n\t\t\t\t.then(res => this.setState({ user: res.data }))\r\n\t\t\t\t.catch(api.errorHandler);\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"beforeunload\", (ev) => {\r\n\t\t\tev.preventDefault();\r\n\t\t\tif (this.state.user && this.state.user.role === \"PLAYER\") {\r\n\t\t\t\tthis.checkOutThenCheckIn(this.state.selectedShoppingList, null);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsocketClient.on(\"online_users_changed\", this.onlineUsersChanged);\r\n\t\tsocketClient.on(\"update_lists\", this.updateShoppingLists);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tsocketClient.off(\"online_users_changed\", this.onlineUsersChanged);\r\n\t\tsocketClient.off(\"update_lists\", this.updateShoppingLists);\r\n\t}\r\n\r\n\tselectShoppingList(newListData) {\r\n\t\t// show loading\r\n\t\tif (newListData == null) {\r\n\t\t\tthis.setState({ changingList: true });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// return if change to same list\r\n\t\tif (newListData && this.state.selectedShoppingList && newListData.key.smartspace === this.state.selectedShoppingList.key.smartspace && newListData.key.id === this.state.selectedShoppingList.key.id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// check to new list and check out from last list\r\n\t\tif (this.state.user && newListData && newListData.elementProperties.onlineIndicator) {\r\n\t\t\tif (this.state.user.role === \"PLAYER\") {\r\n\t\t\t\tif (this.state.selectedShoppingList) {\r\n\t\t\t\t\tthis.checkOutThenCheckIn(this.state.selectedShoppingList, newListData) // check out from old list then check in to new list.\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.checkIn(newListData); // only check in to new list.\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.updateOnlineMembers(newListData); // manager can't check in, only get online status.\r\n\t\t\t\tsocketClient.emit(\"joinList\", newListData.key);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// change selected list\r\n\t\tthis.setState({ selectedShoppingList: newListData, changingList: false });\r\n\t}\r\n\r\n\tcheckIn(newListData) {\r\n\t\tif (this.state.user && newListData && newListData.elementProperties.onlineIndicator) {\r\n\t\t\tlet onlineIndicator = newListData.elementProperties.onlineIndicator;\r\n\t\t\tlet user = this.state.user;\r\n\r\n\t\t\tapi.invokeCheckIn(onlineIndicator.smartspace, onlineIndicator.id, user.key.smartspace, user.key.email)\r\n\t\t\t\t.then(res => { \r\n\t\t\t\t\tthis.updateOnlineMembers(newListData);\r\n\t\t\t\t\tsocketClient.emit(\"joinList\", newListData.key);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(api.errorHandler);\r\n\t\t}\r\n\t}\r\n\r\n\tcheckOutThenCheckIn(oldListData, newListData) {\r\n\t\tif (this.state.user && oldListData && oldListData.elementProperties.onlineIndicator) {\r\n\t\t\tlet onlineIndicator = oldListData.elementProperties.onlineIndicator;\r\n\t\t\tlet user = this.state.user;\r\n\r\n\t\t\tapi.invokeCheckOut(onlineIndicator.smartspace, onlineIndicator.id, user.key.smartspace, user.key.email)\r\n\t\t\t\t.then(res => this.checkIn(newListData))\r\n\t\t\t\t.catch(api.errorHandler);\r\n\t\t}\r\n\t}\r\n\r\n\tupdateOnlineMembers(newListData) {\r\n\t\tif (this.state.user && newListData.elementProperties.onlineIndicator) {\r\n\t\t\tlet onlineIndicator = newListData.elementProperties.onlineIndicator;\r\n\t\t\tlet user = this.state.user;\r\n\r\n\t\t\tapi.getElementByKey(user.key.smartspace, user.key.email, onlineIndicator.smartspace, onlineIndicator.id)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.setState({ onlineUsers: res.data.elementProperties.onlineMembers })\r\n\t\t\t\t})\r\n\t\t\t\t.catch(api.errorHandler);\r\n\t\t}\r\n\t}\r\n\r\n\tonlineUsersChanged () {\r\n\t\tthis.updateOnlineMembers(this.state.selectedShoppingList);\r\n\t}\r\n\r\n\tupdateShoppingLists() {\r\n\t\tlet user = this.state.user;\r\n\r\n\t\tapi.getAllShoppingLists(user.key.smartspace, user.key.email)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.setState({ shoppingListsData: res.data });\r\n\r\n\t\t\t\tif (this.state.selectedShoppingList == null && res.data && res.data.length > 0) {\r\n\t\t\t\t\tthis.selectShoppingList(res.data[0]);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(api.errorHandler);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className='mainPage-display'>\r\n\t\t\t\t<NavBar user={this.state.user} />\r\n\t\t\t\t<div className=\"row mx-0\">\r\n\t\t\t\t\t<div className=\"col-2 border p-0 sidebar bg-light\">\r\n\t\t\t\t\t\t<ShoppingListsNav user={this.state.user} selectShoppingList={this.selectShoppingList} shoppingListData={this.state.selectedShoppingList} shoppingListsData={this.state.shoppingListsData} updateShoppingLists={this.updateShoppingLists} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col mainContent p-0\">\r\n\t\t\t\t\t\t<ShoppingListDisplay user={this.state.user} shoppingListData={this.state.selectedShoppingList} changingList={this.state.changingList} onlineUsers={this.state.onlineUsers} updateShoppingLists={this.updateShoppingLists} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MainPage;\r\n","import React from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { toast } from 'react-toastify';\r\n\r\nimport * as api from '../../api/smartspace';\r\nimport './Login.css';\r\n\r\nclass Login extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isUserLoggedIn: false,\r\n            email: '',\r\n            smartspace: '2019B.nadav.peleg',\r\n            user: '',\r\n            serverIp: localStorage.getItem(\"server_ip\"),\r\n            serverPort: localStorage.getItem(\"server_port\")\r\n        };\r\n\r\n        this.handleEmailChange = this.handleEmailChange.bind(this);\r\n        this.handleSmartspaceChange = this.handleSmartspaceChange.bind(this);\r\n        this.handleServerIpChange = this.handleServerIpChange.bind(this);\r\n        this.handleServerPortChange = this.handleServerPortChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleEmailChange(event) {\r\n        this.setState({ email: event.target.value });\r\n    }\r\n\r\n    handleSmartspaceChange(event) {\r\n        this.setState({ smartspace: event.target.value });\r\n    }\r\n\r\n    handleServerIpChange(event) {\r\n        this.setState({ serverIp: event.target.value });\r\n    }\r\n\r\n    handleServerPortChange(event) {\r\n        this.setState({ serverPort: event.target.value });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n\r\n        localStorage.setItem(\"server_ip\", this.state.serverIp);\r\n        localStorage.setItem(\"server_port\", this.state.serverPort);\r\n        api.updateServerDetails();\r\n\r\n        api.getUserByKey(this.state.smartspace, this.state.email)\r\n            .then(res => {\r\n                this.setState({ user: res.data, isUserLoggedIn: true });\r\n                toast.info(\"Logged in successfully\");\r\n            }\r\n            ).catch(api.errorHandler);\r\n    }\r\n\r\n    render() {\r\n\r\n        if (!this.state.isUserLoggedIn) {\r\n            return (\r\n                <div className=\"container\">\r\n                    <div className=\"form-signin bg-light border rounded my-5\">\r\n                        <form onSubmit={this.handleSubmit}>\r\n                            <h1 className=\"h3 mb-4 text-center\">Sign In</h1>\r\n\r\n                            <div className=\"row\">\r\n                                <div className=\"col-8 pr-0\">\r\n                                    <input type=\"text\" className=\"form-control\" placeholder=\"Server Ip\" value={this.state.serverIp} onChange={this.handleServerIpChange} required />\r\n                                </div>\r\n                                <div className=\"col-4 pl-0\">\r\n                                    <input type=\"text\" className=\"form-control\" placeholder=\"Port\" value={this.state.serverPort} onChange={this.handleServerPortChange} required />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <input type=\"text\" className=\"form-control\" placeholder=\"User Smartspace\" value={this.state.smartspace} onChange={this.handleSmartspaceChange} required />\r\n                            <input type=\"email\" className=\"form-control mt-2\" placeholder=\"User Email\" value={this.state.email} onChange={this.handleEmailChange} required />\r\n                            <button className=\"btn btn-lg btn-primary btn-block mt-3\" type=\"submit\" >Sign in</button>\r\n\r\n                            <hr />\r\n                            <p className=\"my-0\">\r\n                                <Link to=\"/register/\"> <small className=\"form-text text-muted\">Or click here to sign up</small> </Link>\r\n                            </p>\r\n\r\n                        </form>\r\n                    </div></div>\r\n            );\r\n        }\r\n\r\n        return <Redirect to={`/dashboard/${this.state.smartspace}/${this.state.email}/`} />;\r\n    }\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { toast } from 'react-toastify';\r\n\r\nimport * as api from '../../api/smartspace';\r\nimport './Register.css';\r\n\r\nclass Login extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            registerSuccess: false,\r\n            email: '',\r\n            username: '',\r\n            avatar: '',\r\n            role: 'PLAYER',\r\n            user: null\r\n        };\r\n        this.handleEmailChange = this.handleEmailChange.bind(this);\r\n        this.handleUsernameChange = this.handleUsernameChange.bind(this);\r\n        this.handleAvatarChange = this.handleAvatarChange.bind(this);\r\n        this.handleRoleChange = this.handleRoleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleEmailChange(event) {\r\n        this.setState({ email: event.target.value });\r\n    }\r\n\r\n    handleUsernameChange(event) {\r\n        this.setState({ username: event.target.value });\r\n    }\r\n\r\n    handleAvatarChange(event) {\r\n        this.setState({ avatar: event.target.value });\r\n    }\r\n\r\n    handleRoleChange(event) {\r\n        this.setState({ role: event.target.value });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        api.registerAccount(this.state.email, this.state.role, this.state.username, this.state.avatar).then(res => {\r\n            this.setState({ user: res.data, registerSuccess: true });\r\n            toast.info(\"Success! You are now logged in.\");\r\n        }\r\n        ).catch(api.errorHandler);\r\n\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.registerSuccess) {\r\n            return (\r\n                <div className=\"container\">\r\n                    <div className=\"form-signin bg-light border rounded mt-5\">\r\n                        <form onSubmit={this.handleSubmit}>\r\n                            <h1 className=\"h3 mb-4 mt-2 text-center\">Sign Up</h1>\r\n                            <hr />\r\n                            <input type=\"email\" className=\"form-control mb-3\" placeholder=\"User Email\" value={this.state.email} onChange={this.handleEmailChange} required />\r\n                            <input type=\"text\" className=\"form-control mb-3\" placeholder=\"Username\" value={this.state.username} onChange={this.handleUsernameChange} required />\r\n                            <input type=\"text\" className=\"form-control mb-3\" placeholder=\"Avatar (image url)\" value={this.state.avatar} onChange={this.handleAvatarChange} required />\r\n\r\n                            <select className=\"form-control\" onChange={this.handleRoleChange}>\r\n                                <option defaultValue>PLAYER</option>\r\n                                <option>MANAGER</option>\r\n                                <option>ADMIN</option>\r\n                            </select>\r\n\r\n                            <button className=\"btn btn-lg btn-primary btn-block mt-3\" type=\"submit\" >Sign up</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let userData = this.state.user;\r\n        return <Redirect to={`/dashboard/${userData.key.smartspace}/${userData.key.email}/`} />;\r\n    }\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport Spinner from \"./Spinner\";\r\n\r\nfunction UserCard(props) {\r\n    return (\r\n        <div className=\"card mx-auto w-50\">\r\n\r\n            <div className=\"card-header\">\r\n                {props.title}\r\n            </div>\r\n\r\n            <div className=\"card-body text-left\">\r\n                {props.children}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction TextField(props) {\r\n    return (\r\n        <div className=\"card-text form-group\">\r\n            <label htmlFor={props.id}>{props.label}</label>\r\n            <input type=\"text\" className=\"form-control\" id={props.id} placeholder={props.label} value={props.value} disabled={props.disabled} onChange={props.onChange} />\r\n        </div>\r\n    );\r\n}\r\n\r\nclass UserDetails extends React.Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { username: \"\", avatar: \"\" };\r\n\r\n        this.handleUsernameChange = this.handleUsernameChange.bind(this);\r\n        this.handleAvatarChange = this.handleAvatarChange.bind(this);\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.user && (this.props.user !== prevProps.user)) {\r\n            let user = this.props.user;\r\n            this.setState({ username: user.username, avatar: user.avatar });\r\n        }\r\n    }\r\n\r\n    handleUsernameChange(event) {\r\n        this.setState({ username: event.target.value });\r\n    }\r\n\r\n    handleAvatarChange(event) {\r\n        this.setState({ avatar: event.target.value });\r\n    }\r\n\r\n    render() {\r\n        if (this.props.user) {\r\n            let user = this.props.user;\r\n\r\n            return (\r\n                <UserCard title={`${user.username}'s Profile`}>\r\n                    <p className=\"card-text mb-2 lead text-center\"> <img className=\"rounded\" src={user.avatar} alt={user.avatar} height=\"80px\" width=\"80px\" /></p>\r\n                    <p className=\"card-text mb-0 lead text-center\">Role: {user.role}</p>\r\n                    <p className=\"card-text mt-0 lead text-center\">Points: {user.points}</p>\r\n\r\n                    <hr />\r\n\r\n                    <form onSubmit={this.props.handleProfileUpdate}>\r\n                        <TextField id=\"smartspace\" label=\"User Smartspace\" value={user.key.smartspace} disabled />\r\n                        <TextField id=\"email\" label=\"User Email\" value={user.key.email} disabled />\r\n                        <TextField id=\"username\" label=\"Username\" value={this.state.username} onChange={this.handleUsernameChange} />\r\n                        <TextField id=\"avatar\" label=\"Avatar\" value={this.state.avatar} onChange={this.handleAvatarChange} />\r\n                        <button className=\"btn btn-lg btn-primary btn-block mt-3\" type=\"submit\" >Update</button>\r\n                    </form>\r\n                </UserCard>\r\n            );\r\n        }\r\n\r\n        return <UserCard title=\"My Profile\"><Spinner /></UserCard>;\r\n    }\r\n}\r\n\r\nexport default UserDetails;","import React from \"react\";\r\nimport { toast } from 'react-toastify';\r\n\r\nimport * as api from '../api/smartspace';\r\nimport UserDetails from \"./UserDetails\";\r\nimport NavBar from \"./NavBar\";\r\n\r\nclass ManageProfile extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { smartspace: \"\", email: \"\", user: null };\r\n\r\n\t\tthis.handleProfileUpdate = this.handleProfileUpdate.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.match && this.props.match.params) {\r\n\r\n\t\t\tlet params = this.props.match.params;\r\n\t\t\tthis.setState({ smartspace: params.smartspace, email: params.email });\r\n\r\n\t\t\tapi.getUserByKey(params.smartspace, params.email)\r\n\t\t\t\t.then(res => this.setState({ user: res.data }))\r\n\t\t\t\t.catch(api.errorHandler);\r\n\t\t}\r\n\t}\r\n\r\n\thandleProfileUpdate(event) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tlet newUsername = event.target.username.value;\r\n\t\tlet newAvatar = event.target.avatar.value;\r\n\r\n\t\tconst updateUserData = () => {\r\n\t\t\tapi.getUserByKey(this.state.smartspace, this.state.email).then(res => {\r\n\t\t\t\tthis.setState({ user: res.data });\r\n\t\t\t\ttoast.success(\"Updated your profile!\");\r\n\t\t\t}\r\n\t\t\t).catch(api.errorHandler);\r\n\t\t}\r\n\r\n\t\tapi.updateUser(this.state.smartspace, this.state.email, { username: newUsername, avatar: newAvatar }).then(updateUserData);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<NavBar user={this.state.user} />\r\n\t\t\t\t<div className=\"container text-center mt-5\">\r\n\t\t\t\t\t<UserDetails user={this.state.user} handleProfileUpdate={this.handleProfileUpdate} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ManageProfile;\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport * as api from '../../api/smartspace';\r\nimport { getSocketClient, updateSocketSettings } from '../../api/socket';\r\n\r\nimport NavBar from \"../NavBar\";\r\nimport './Settings.css';\r\nimport { toast } from \"react-toastify\";\r\n\r\nclass Settings extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            serverIp: localStorage.getItem(\"socket_ip\"),\r\n            serverPort: localStorage.getItem(\"socket_port\"),\r\n            smartspace: \"\",\r\n            email: \"\",\r\n            user: null,\r\n            saved: false\r\n        };\r\n\r\n        this.handleServerIpChange = this.handleServerIpChange.bind(this);\r\n        this.handleServerPortChange = this.handleServerPortChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.connectionSuccess = this.connectionSuccess.bind(this);\r\n        this.socketTest = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.match && this.props.match.params) {\r\n            let params = this.props.match.params;\r\n            this.setState({ smartspace: params.smartspace, email: params.email });\r\n\r\n            api.getUserByKey(params.smartspace, params.email)\r\n                .then(res => this.setState({ user: res.data }))\r\n                .catch(api.errorHandler);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.socketTest !== null) {\r\n            this.socketTest.off(\"connection_success\", this.connectionSuccess);\r\n            this.socketTest.disconnect();\r\n        }\r\n    }\r\n\r\n    handleServerIpChange(event) {\r\n        this.setState({ serverIp: event.target.value });\r\n    }\r\n\r\n    handleServerPortChange(event) {\r\n        this.setState({ serverPort: event.target.value });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n\r\n        if (this.socketTest !== null) {\r\n            this.socketTest.off(\"connection_success\", this.connectionSuccess);\r\n            this.socketTest.disconnect();\r\n        }\r\n\r\n        localStorage.setItem(\"socket_ip\", this.state.serverIp);\r\n        localStorage.setItem(\"socket_port\", this.state.serverPort);\r\n\r\n        this.socketTest = getSocketClient(false);\r\n\r\n        this.socketTest.on(\"connection_success\", this.connectionSuccess);\r\n        this.socketTest.emit(\"test_connection\", this.state.user.key);\r\n\r\n        setTimeout(() => {\r\n            if (!this.state.saved) {\r\n                toast.error(\"Connection failed\");\r\n            }\r\n        }, 2000);\r\n    }\r\n\r\n    connectionSuccess() {\r\n        this.setState({ saved: true });\r\n        toast.success(\"Connected! You should refresh the page.\");\r\n        updateSocketSettings();\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.saved) {\r\n            return (\r\n                <div>\r\n                    <NavBar user={this.state.user} />\r\n                    <div className=\"container\">\r\n                        <div className=\"form-signin bg-light border rounded my-5\">\r\n                            <form onSubmit={this.handleSubmit}>\r\n                                <h1 className=\"h3 mb-4 text-center\">Socket Server Settings</h1>\r\n\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-8 pr-0\">\r\n                                        <input type=\"text\" className=\"form-control\" placeholder=\"Socket Ip\" value={this.state.serverIp} onChange={this.handleServerIpChange} required />\r\n                                    </div>\r\n                                    <div className=\"col-4 pl-0\">\r\n                                        <input type=\"text\" className=\"form-control\" placeholder=\"Port\" value={this.state.serverPort} onChange={this.handleServerPortChange} required />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <button className=\"btn btn-lg btn-primary btn-block mt-0\" type=\"submit\" >Save</button>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return <Redirect to={`/dashboard/${this.state.smartspace}/${this.state.email}/`} />;\r\n    }\r\n}\r\n\r\nexport default Settings;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { HashRouter, Route } from \"react-router-dom\";\r\nimport { toast } from 'react-toastify';\r\n\r\nimport MainPage from \"./components/mainPage/MainPage\";\r\nimport Login from \"./components/login/Login.js\";\r\nimport Register from \"./components/register/Register.js\";\r\nimport ManageProfile from \"./components/ManageProfile.js\";\r\nimport Settings from \"./components/settings/Settings\";\r\n\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n// Call it once in your app. At the root of your app is the best place --> important for the messages to work\r\n// usage demo at --> https://fkhadra.github.io/react-toastify/\r\ntoast.configure()\r\n\r\nclass App extends React.Component {\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<HashRouter>\r\n\t\t\t\t<Route path=\"/\" exact component={Login} />\r\n\t\t\t\t<Route path=\"/register/\" exact component={Register} />\r\n\t\t\t\t<Route path=\"/dashboard/:smartspace/:email/settings/\" exact component={Settings} />\r\n\t\t\t\t<Route path=\"/dashboard/:smartspace/:email/\" exact component={MainPage} />\r\n\t\t\t\t<Route path=\"/dashboard/:smartspace/:email/profile/\" exact component={ManageProfile} />\r\n\t\t\t</HashRouter>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nReactDOM.render(<App />, document.querySelector(\"#root\"));\r\n"],"sourceRoot":""}